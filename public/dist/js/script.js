function getDataBase(t){var a=firebase.database();a.ref().on("child_added",function(t){var a=t.val();DBData=Object.keys(a).map(function(t){return{id:t,data:a[t]}})}),a.ref().on("value",function(a){var e=a.val();DBData=Object.keys(e).map(function(t){return{id:t,data:e[t]}}),t&&t(DBData)})}function pushData(t,a,e,i){if(void 0!=i)return""!==e?a=i.data.ko:""!==a&&(e=i.data.ja),firebase.database().ref().child("/"+i.id).set({sendText:i.data.sendText,ja:e,ko:a}),!1;firebase.database().ref().child("/").push({sendText:t,ja:e,ko:a})}function textTranslate(t){function a(t,a){function s(a,e,i){if("ja"==e){u=a;n=1==o?"":t}else if("ko"==e){var n=a;u=1==o?"":t}pushData(t,n,u,r),i&&i({ko:n,ja:u,resultLang:e})}var r=getTextData(t,n);if(e(r,n)){var u="";translateAPI(t=t,i,n,function(o){var r=o.translatedText;o.srcLangType;if(t==r&&1==p)return e(getTextData(t,i),n)&&translateAPI(t,n,i,function(t){s(t.translatedText,n,a)}),!1;s(r,n,a)})}else a&&a(r.data)}function e(t,a){if(void 0!==t){if("ko"==a){if(""==t.data.ko)return!0}else if("ja"==a&&""==t.data.ja)return!0;return!1}return!0}var i="ko",n="ko"===t.resultLang?"ko":"ja",o=!0===t.checkKey,p=!0===t.autoKey;"ko"==n&&(i="ja",n="ko"),t.sendText?a(t.sendText,function(a){t.cb&&t.cb(a)}):$("[data-langtext]").each(function(){var e=$(this);a($.trim(e.text()),function(a){var i="ko"==t.resultLang?a.ko:a.ja;t.cb&&t.cb(a),e.text(i)})})}function translateAPI(t,a,e,i){$.ajax({type:"GET",beforeSend:function(t){t.setRequestHeader("content-type","text/javascript")},url:"/translate",data:{text:t,sendLang:a,resultLang:e},dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){var t=JSON.parse(t);i&&i(t.message.result)}})}function getTextData(t,a){var e=[];return"ko"==a?e=DBData.filter(function(a){return a.data.ja===t}):"ja"==a&&(e=DBData.filter(function(a){return a.data.ko===t})),0!==e.length?e[0]:(e=DBData.filter(function(a){return $.trim(a.data.sendText)===t}),"ko"==a?e=DBData.filter(function(a){return $.trim(a.data.ko)===t}):"ja"==a&&(e=DBData.filter(function(a){return $.trim(a.data.ja)===t})),0!==e.length&&("ko"==a&&""===e[0].data.ko||"ja"==a&&""===e[0].data.ja)&&(e=[]),0!==e.length?e[0]:void 0)}function translateInit(){getDataBase(function(){addClickCss(),addPopupHTML()})}function addClickCss(){var t="<style type='text/css'> ";t+=".langClickCss:hover{ background-color:#ddd; font-weight:bold; curser: pointer;}",t+=" </style>",$("head").append(t),$("[data-langtext]").addClass("langClickCss"),$(".langClickCss").click(function(){popupOpen($(this).text())})}function addPopupHTML(){var t="<style type='text/css'> ",a="<style type='text/css'> ";t+=".popup-ui { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 7777; opacity: 0; visibility: hidden; background: rgba(0, 0, 0, 0.5); text-align: center; transition: all 0.2s ease-in-out; }",t+=".popup-ui:before { content: ''; display: inline-block; height: 100%; vertical-align: middle; }",t+=".popup-ui .popup-ui-wrapper { position: relative; display: inline-block; vertical-align: middle; margin: 0 auto; text-align: left; }",t+=".popup-ui .popup-ui-wrapper .popup-ui-content { position: relative; background: #FFF; padding: 0; width: auto; margin: 0 auto; opacity: 0; visibility: hidden; border: solid 5px #FFF; max-width: 90%; transition: all 0.2s ease-in-out; transform: scale(0.8); box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.5); }",t+=".popup-ui.show { opacity: 1; visibility: visible; }",t+=".popup-ui.show .popup-ui-content { opacity: 1; visibility: visible; transform: scale(1); }",t+=".my-content img { max-width: 100%; height: auto; }",t+=".my-content h3 { padding: 0 10px; font-weight: 300; margin-bottom: 0; }",t+=".my-content p { padding: 0 10px; font-size: 0.9em; }",t+="#btnpopup { display: block; margin: 2em auto 0 auto; width: 200px; }",t+=" </style>",t="<style type='text/css'> ",a+=".popup-ui { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 7777; opacity: 0; visibility: hidden; background: rgba(0, 0, 0, 0.5); text-align: center; transition: all 0.2s ease-in-out; }",a+=".popup-ui:before { content: ''; display: inline-block; height: 100%; vertical-align: middle; }",a+=".popup-ui .popup-ui-wrapper { position: relative; display: inline-block; vertical-align: middle; margin: 0 auto; text-align: left; }",a+=".popup-ui .popup-ui-wrapper .popup-ui-content { position: relative; background: #FFF; padding: 0; width: auto; margin: 0 auto; opacity: 0; visibility: hidden; border: solid 5px #FFF; max-width: 90%; transition: all 0.2s ease-in-out; transform: scale(0.8); box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.5); }",a+=".popup-ui.show { opacity: 1; visibility: visible; }",a+=".popup-ui.show .popup-ui-content { opacity: 1; visibility: visible; transform: scale(1); }",a+=".my-content img { max-width: 100%; height: auto; }",a+=".my-content h3 { padding: 0 10px; font-weight: 300; margin-bottom: 0; }",a+=".my-content p { padding: 0 10px; font-size: 0.9em; }",a+="#btnpopup { display: block; margin: 2em auto 0 auto; width: 200px; }",a+=" </style>",$("body").append('<div id="mypopup" class="popup-ui"><div class="popup-ui-wrapper"><div class="popup-ui-content"><div class="my-content"><h3 class="textString"></h3><input class="inputForm"></div></div></div></div>"'),$("head").append(t),$("head").append(a);document.getElementById("btnpopup");document.getElementById("mypopup").addEventListener("click",function(){0==$(event.target).closest(".popup-ui-wrapper").length&&(this.className="popup-ui")},!1)}function popupOpen(t){document.getElementById("mypopup").className="popup-ui  show",$("#mypopup").find(".textString").text(t),$("#mypopup").find(".inputForm").attr("placeholder",t)}var DBData=void 0,config={apiKey:"AIzaSyCsH1pUNQ0HrEDPvHwFjOAzOcYgMmHRlKc",authDomain:"translate-c25e0.firebaseapp.com",databaseURL:"https://translate-c25e0.firebaseio.com",projectId:"translate-c25e0",storageBucket:"translate-c25e0.appspot.com",messagingSenderId:"756527365478"};firebase.initializeApp(config);