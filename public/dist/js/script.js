function getDataBase(t){DATABASE.ref().on("value",function(a){var e=a.val();DBData=Object.keys(e).map(function(t){return{id:t,data:e[t]}}),t&&t(DBData)})}function pushData(t,a){firebase.database().ref().child("/").push({ja:a,ko:t})}function allTextTranslate(){$("[data-langtext]").each(function(){var t=$(this),a=$.trim(t.text()),e=getTextData(a);if(void 0===e){var n=a;translateAPI(n,function(a){pushData(n,a),t.text(a)})}else t.text(e.data.ja)})}function translateAPI(t,a){void 0===getTextData(t)&&$.ajax({type:"GET",beforeSend:function(t){t.setRequestHeader("content-type","text/javascript")},url:"/translate",data:{text:t},dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){var e=(t=JSON.parse(t)).message.result.translatedText;t.message.result.srcLangType;a&&a(e)}})}function getTextData(t){var a=DBData.filter(function(a){return a.data.ko===t});return 0===a.length&&(a=DBData.filter(function(a){return a.data.ja===t})),0!==a.length?a[0]:void 0}function translateInit(){getDataBase(function(){allTextTranslate()})}var DBData=void 0,config={};firebase.initializeApp(config),DATABASE=firebase.database();